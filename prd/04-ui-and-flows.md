# DataStudio 页面与交互

## 1. 总体说明

本文档定义 DataStudio 的页面结构与关键交互路径，用于统一产品交互口径。交互执行与输出语义要求与 Jupyter Notebook 保持一致。

## 2. 页面结构

### 2.1 集群管理

- **集群列表**
  - 展示：集群名称、类型（Flink/Spark）、可用性、Web 入口。
  - 操作：新增、编辑、下线。
- **集群详情**
  - 展示：集群基本信息、Web 入口、可用性信息。
  - 操作：编辑、可用性检查。

### 2.2 Notebook 工作台

- **Notebook 列表**
  - 展示：Notebook 名称、最近更新时间、默认集群。
  - 操作：创建、重命名、复制、删除、导入、导出。
- **Notebook 编辑页**
  - **顶部区域**
    - 展示：当前集群、连接状态、Web 入口（JobManager/Application）。
    - 操作：切换集群、打开 Web 入口。
  - **参数区域**
    - 展示：参数定义与当前取值。
    - 操作：编辑参数定义、运行前输入参数取值。
  - **单元区域**
    - 支持：新增/删除/排序单元，编辑 SQL/Markdown。
    - 单元状态：未运行/运行中/成功/失败/已中断。
  - **运行与输出区域**
    - 支持：运行单元、运行全部、停止当前运行。
    - 输出：结果、错误信息。

### 2.3 生产提交

- **提交入口**
  - 位置：Notebook 编辑页（对当前内容发起提交）。
  - 展示：目标引擎、目标集群、提交结果与追踪入口。
- **提交列表/详情**
  - 展示：提交记录、当前状态、Web 入口。
  - 操作：刷新状态、取消任务。

## 3. 关键交互路径

### 3.1 注册集群

- 入口：集群列表 → 新增
- 结果：集群可被 Notebook 选择；Web 入口可在 Notebook 顶部展示。

### 3.2 创建并编辑 Notebook

- 入口：Notebook 列表 → 创建
- 结果：可新增单元并保存；可绑定默认集群；可定义参数。

### 3.3 运行单元

- 入口：Notebook 编辑页 → 单元 → 运行
- 交互语义（Jupyter 一致）
  - 单元进入“运行中”，可被中断。
  - 运行结束后进入“成功/失败/已中断”，并产出对应输出。

### 3.4 运行全部

- 入口：Notebook 编辑页 → 运行全部
- 结果：按单元顺序触发运行，并逐单元产出状态与输出。

### 3.5 停止运行

- 入口：Notebook 编辑页 → 停止
- 结果：当前运行被中断；单元状态更新为“已中断”，并给出用户可理解的反馈。

### 3.6 生产提交与追踪

- 入口：Notebook 编辑页 → 提交
- 结果：提交成功后可在提交列表/详情中查看状态，并通过 Web 入口跳转追踪；支持取消。

